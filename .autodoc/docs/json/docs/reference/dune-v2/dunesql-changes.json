{
  "fileName": "dunesql-changes.md",
  "filePath": "docs\\reference\\dune-v2\\dunesql-changes.md",
  "url": "https://dune.com/blob/master/reference\\dune-v2\\dunesql-changes.md",
  "summary": "The DuneSQL migration technical guide provides documentation on the changes made to DuneSQL on March 2nd, 2023. The guide is divided into several sections, each with a specific focus. \n\nThe warning section highlights the issues with datatypes in some tables in DuneSQL and provides a temporary workaround for the affected tables. \n\nThe DuneSQL Alpha Deprecation and Data Type Changes section explains the changes made to DuneSQL. The changes include the use of the same data types as the underlying EVM blockchain, support for uint256 and int256, correction of an ancient mistake in the database, and modification of the from_hex native function. The section also explains the implications of these changes for users, including improved query speed, easier query maintenance, and full wei-level precision calculations. \n\nThe What do I need to do? section provides a step-by-step guide on what users need to do to adjust their queries to use compatible functions before the deprecation date. The section also highlights common errors and fixes, such as casting varchar to varbinary, casting to uint256, using bytearray_substring, and using bytearray_starts_with instead of LIKE expression. \n\nThe Changes section provides a summary of the changes made to DuneSQL, including the renaming of logs.topicX columns to topic0, topic1, topic2, topic3, and the removal of automatic coercion of breaking type changes of contract updates. \n\nOverall, the DuneSQL migration technical guide provides a comprehensive overview of the changes made to DuneSQL and the implications for users. The guide is useful for developers and users who want to understand the changes and how to adjust their queries to use compatible functions.",
  "questions": "1. What are the current issues with datatypes in some tables in DuneSQL and when are they expected to be resolved?\n- The current issues with datatypes in some tables in DuneSQL include some Spellbook tables, `flashbots.*`, `reservoir.*`, and `snapshot.*` and `cowswap.*`. The issue with `prices.usd` has already been fixed on March 6th, 2023. The issues with `flashbots.*` and `reservoir.*` are expected to be fixed by March 10th, 2023, while the issues with `snapshot.*` and `cowswap.*` are still to be determined.\n\n2. What are the benefits of switching to the `varbinary` datatype in DuneSQL?\n- Switching to the `varbinary` datatype in DuneSQL should significantly improve the speed of queries by approximately 30%. It also eliminates the need for string casts and conversions, making queries more readable and easier to maintain. Additionally, the introduction of `uint256` and `int256` allows for full wei-level precision calculations.\n\n3. What are some common errors and fixes when working with the new data types in DuneSQL?\n- Some common errors and fixes when working with the new data types in DuneSQL include casting varchar to varbinary using `from_hex(x))`, casting to uint256 using `cast(xxx as uint256)`, using `bytearray_substring` and `bytearray_starts_with` instead of LIKE expression, and adjusting the indexing of topics from `Topic1` to `Topic0`, `Topic2` to `Topic1`, etc."
}